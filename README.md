# Соревновательный симулятор (Go 1.23)

## Описание

Проект моделирует обработку событий спортивного соревнования на основе конфигурационного файла и журнала событий. 

## Структуры данных

- `Config`, `Competitor`, `Lap`, `PenaltyLap`, `FiringRangeVisit`, `Event` - основные структуры.
- `CompetitorStatus` - используется набор констант для определения состояния участника.

## Работа со временем и длительностями

- `timeLayout`, `eventTimeLayout`, `configTimeLayout` - шаблоны времени.
- `parseDuration` - парсинг формата длительности `"HH:MM:SS"` из поля `startDelta`.
- `formatDuration` - форматирование `time.Duration` в строку `"HH:MM:SS.sss"`.
- Методы:
    - `Lap.Duration()`, `Lap.AverageSpeed()`
    - `PenaltyLap.Duration()`, `PenaltyLap.AverageSpeed()`

## Загрузка и парсинг

- `loadConfig` - читает JSON-файл конфигурации, парсит стандартные поля, использует `time.Parse` и `parseDuration`.
- `parseEvent` - парсит строку из журнала событий.

## Основная логика (main.go)

1. Чтение аргументов командной строки
2. Загрузка конфигурации
3. Загрузка событий в слайс `eventProcessingOrder`
4. Инициализация:
    - `competitors` (карта состояния участников)
    - `outputLog` (для хронологического вывода логов)
5. Цикл обработки событий:
    - Проверка на опоздание: участники, не начавшие вовремя, получают статус `NotStarted`
    - Поиск или создание соответствующего участника
    - Пропуск событий для неизвестных, завершивших или дисквалифицированных участников
    - Обработка события через `switch event.ID`
    - Обновление `lastProcessedTime`

6. Постобработка:
    - Выявление участников, не стартовавших или не завершивших.

## Генерация вывода

1. Вывод `outputLog` в терминал.
2. Преобразование карты участников в слайс.
3. Сортировка списка:
    - В первую очередь по статусу (`Finished`, затем остальные),
    - Затем по общему времени (если завершил),
    - Далее по ID участника.
4. Вывод финального отчета:
    - Формат статуса и общего времени,
    - Формат круга (длительность, средняя скорость),
    - Суммарное штрафное время и средняя скорость,
    - Стрельба (попадания / выстрелы),
    - Финальная строка на участника.

## Как запустить

1. Склонируйте репозиторий:
   
   ```bash
   git clone 
   ```
2. Перейдите в директорию проекта:

   ```bash
   cd solid-system
   ```

3. Используйте конфигурационные файлы из примера или создайте свои `config.json` и `event`.
   
4. В терминале выполните:

   ```bash
   go run main.go config.json event
   ```

5. Тесты

    Насчет тестов: в проекте реализовал юнит-тесты с очень жидким покрытием, вышло всего 20%, но в задании ничего про 
    это не сказано, в ином случае я бы делал интеграционные тесты для данного проекта, но было написано только про юнит-тестирование, поэтому имеем, что имеем.
   
    ```bash
    go test -v ./...
    ```
